<%- include ('partials/_header'); %>

<div class="container">

  <div class="row">
    <div class="col-md-4 order-md-2">
        <h4 class="border-gray pb-2 mb-0">¿Que has pedido?</h4>

        <ul class="list-group mb-3 p-3 bg-white rounded shadow-sm" id="shop">
            <li class="list-group-item justify-content-between lh-condensed">Lista de productos - <span class="badge badge-secondary"><small class="products text-right"><%= carrito.length %> </small> <small>productos</small></span></li>
                <% if(carrito){ var precio = 0 %>
                  <% for(var i=0; i < carrito.length; i++) { 
                    var sumar = carrito[i].precio;
                    var precio = parseFloat(precio + sumar);
                    var precio2 = precio.toFixed(2); %> 
                <li class="list-group-item justify-content-between lh-condensed" id="<%= carrito[i].id %>">
                <div class="d-flex" >
                  <div style="width: 100%;">
                    <h6 class="my-0"><%= carrito[i].precio %> €</h6>
                    <small class="text-muted"><%= carrito[i].nombre %></small>
                  </div>

                </div>
                </li>
                <% } %>
                <% }else{ precio2 = 0;  %>
                <% } %>
                
        </ul>
        <ul class="list-group mb-3 p-3 bg-white rounded shadow-sm" id="shop">
            <li class="list-group-item d-flex justify-content-between">
              <span>Total (€)</span>
              <strong id="total">
    
                <%if (!precio2) { %>
                0€
                <% }else{ %>
                <%= precio2 %> €
                <% } %>
              
              </strong>
            </li>
    </ul>       
    </div>

    <div class="col-md-8 order-md-1" >

      <h4 class=" order-gray pb-2 mb-0">Datos</h4> 
      <div class="card p-3 bg-white rounded shadow-sm">
        <h6 class="card-header">Nombre</h6>
        <div class="card-body">
          <p class="card-text"><%= car.name %></p>
        </div>
      </div>
      <br>
      <div class="card p-3 bg-white rounded shadow-sm">
        <h6 class="card-header">Teléfono</h6>
        <div class="card-body">
          <p class="card-text"><%= car.phone %></p>
        </div>
      </div>
      <br>
      <div class="card p-3 bg-white rounded shadow-sm">
        <h6 class="card-header">Hora del pedido</h6>
        <div class="card-body">
          <p class="card-text"><%= car.createdAt %></p>
        </div>
      </div>
      
      
    </div>
  
    </div>
  </div>
</div>
<script src="https://js.stripe.com/v3/"></script>
<script src="asset/js/stripe.js"></script>
<%- include ('partials/_footer'); %>

